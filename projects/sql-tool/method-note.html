<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NextGen HR Analytics — SQL Toolkit (Method Notes)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <style>
    body{background:#f8fafc}
    .hero{background:#0A192F;color:#E6F1FF}
    .badge-tag{display:inline-block;font-weight:600;border:1px solid #e5e7eb;background:#fff;color:#0A192F;
      padding:.35rem .55rem;border-radius:.5rem;margin-right:.25rem}
    .code{background:#0b1020;color:#d8e6ff;border-radius:.5rem;padding:1rem;font-family:ui-monospace, SFMono-Regular, Menlo, monospace}
  </style>
</head>
<body>
  <header class="hero py-5 mb-4">
    <div class="container">
      <h1 class="h2 fw-bold mb-2">NextGen HR Analytics — SQL Toolkit</h1>
      <p class="mb-0">PostgreSQL scripts for tenure, turnover, at-risk staff, exit reasons, salary benchmarks, and performance–pay correlation.</p>
      <div class="mt-3">
        <span class="badge-tag">SQL</span>
        <span class="badge-tag">PostgreSQL</span>
        <span class="badge-tag">HR Analytics</span>
      </div>
    </div>
  </header>

  <main class="container pb-5">
    <div class="row g-4">
      <div class="col-lg-8">
        <div class="card shadow-sm">
          <div class="card-body">
            <h5 class="fw-bold">Overview</h5>
            <p class="text-muted">
              This toolkit is organized as independent query blocks so analysts can run only what they need.
              It covers: longest-serving employees, department turnover rates, at-risk staff (avg score ≤ 2.5),
              exit reasons & totals, score distributions (5.0 and &lt; 3.5), top/bottom departments by performance,
              average performance by department, total salary expense, average salary by title, employees &gt; £80k,
              and a proxy correlation between performance and salary.
            </p>

            <h6 class="fw-bold mt-4">Data assumptions</h6>
            <ul class="text-muted">
              <li>Tables: <code>employees</code>, <code>departments</code>, <code>performance_reviews</code>, <code>exits</code>, <code>salaries</code></li>
              <li>Keys: employee_id across tables; department_id for org rollups.</li>
              <li>Date fields normalized to <code>date</code> or <code>timestamp</code>.</li>
            </ul>

            <h6 class="fw-bold mt-4">Sample pattern (CTE + aggregation)</h6>
            <pre class="code"><code>WITH tenure AS (
  SELECT e.employee_id,
         DATE_PART('year', AGE(CURRENT_DATE, e.hire_date)) AS years_with_company
  FROM employees e
)
SELECT employee_id, years_with_company
FROM tenure
ORDER BY years_with_company DESC
LIMIT 5;</code></pre>

            <h6 class="fw-bold mt-4">How to use</h6>
            <ol class="text-muted">
              <li>Open the <strong>.sql</strong> file in your SQL editor (PostgreSQL).</li>
              <li>Run blocks independently; each query has its own SELECT/CTE context.</li>
              <li>Materialize key outputs as views if needed for BI tools.</li>
            </ol>

            <div class="mt-4 d-flex gap-2">
              <a class="btn btn-primary" href="../../docs/NextGen_Query.sql" download>Download .sql</a>
              <a class="btn btn-outline-secondary" href="../../index.html">Back to Portfolio</a>
            </div>
          </div>
        </div>
      </div>

      <aside class="col-lg-4">
        <div class="card shadow-sm">
          <div class="card-body">
            <h6 class="fw-bold">KPIs answered</h6>
            <ul class="small mb-3">
              <li>Top 5 longest tenure</li>
              <li>Department turnover rate</li>
              <li>At-risk (avg score ≤ 2.5)</li>
              <li>Exit reasons & totals</li>
              <li>Avg perf by department</li>
              <li>Salary expense &gt; £80k</li>
              <li>Perf ↔ Salary (proxy)</li>
            </ul>
            <h6 class="fw-bold">Files</h6>
            <p class="small mb-0"><code>docs/NextGen_Query.sql</code></p>
          </div>
        </div>
      </aside>
    </div>
  </main>
</body>
</html>
